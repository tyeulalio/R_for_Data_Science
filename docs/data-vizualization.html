<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data Visualization | Working Through R for Data Science</title>
  <meta name="description" content="This book goes through the chapters and exercises of the R for Data Science Book" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data Visualization | Working Through R for Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book goes through the chapters and exercises of the R for Data Science Book" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data Visualization | Working Through R for Data Science" />
  
  <meta name="twitter:description" content="This book goes through the chapters and exercises of the R for Data Science Book" />
  

<meta name="author" content="Tiffany Eulalio" />


<meta name="date" content="2021-08-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ch-1-and-2.html"/>
<link rel="next" href="workflow.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Working Through R for Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a></li>
<li class="chapter" data-level="2" data-path="ch-1-and-2.html"><a href="ch-1-and-2.html"><i class="fa fa-check"></i><b>2</b> Chapters 1 and 2</a></li>
<li class="chapter" data-level="3" data-path="data-vizualization.html"><a href="data-vizualization.html"><i class="fa fa-check"></i><b>3</b> Data Visualization</a><ul>
<li class="chapter" data-level="3.1" data-path="data-vizualization.html"><a href="data-vizualization.html#skipping-this-section"><i class="fa fa-check"></i><b>3.1</b> Skipping this section</a></li>
<li class="chapter" data-level="3.2" data-path="data-vizualization.html"><a href="data-vizualization.html#first-steps"><i class="fa fa-check"></i><b>3.2</b> First Steps</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-vizualization.html"><a href="data-vizualization.html#the-mpg-data-frame"><i class="fa fa-check"></i><b>3.2.1</b> The <code>mpg</code> data frame</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-vizualization.html"><a href="data-vizualization.html#creating-a-ggplot"><i class="fa fa-check"></i><b>3.2.2</b> Creating a ggplot</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-vizualization.html"><a href="data-vizualization.html#notes-on-ggplot"><i class="fa fa-check"></i><b>3.2.3</b> Notes on <code>ggplot</code></a></li>
<li class="chapter" data-level="3.2.4" data-path="data-vizualization.html"><a href="data-vizualization.html#exercises"><i class="fa fa-check"></i><b>3.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-vizualization.html"><a href="data-vizualization.html#aesthetic-mappings"><i class="fa fa-check"></i><b>3.3</b> Aesthetic mappings</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-vizualization.html"><a href="data-vizualization.html#exercises-1"><i class="fa fa-check"></i><b>3.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-vizualization.html"><a href="data-vizualization.html#skipping-this-section-1"><i class="fa fa-check"></i><b>3.4</b> Skipping this section</a></li>
<li class="chapter" data-level="3.5" data-path="data-vizualization.html"><a href="data-vizualization.html#facets"><i class="fa fa-check"></i><b>3.5</b> Facets</a><ul>
<li class="chapter" data-level="3.5.1" data-path="data-vizualization.html"><a href="data-vizualization.html#exercises-2"><i class="fa fa-check"></i><b>3.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data-vizualization.html"><a href="data-vizualization.html#geometric-objects"><i class="fa fa-check"></i><b>3.6</b> Geometric Objects</a><ul>
<li class="chapter" data-level="3.6.1" data-path="data-vizualization.html"><a href="data-vizualization.html#exercises-3"><i class="fa fa-check"></i><b>3.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-vizualization.html"><a href="data-vizualization.html#statistical-transformations"><i class="fa fa-check"></i><b>3.7</b> Statistical transformations</a><ul>
<li class="chapter" data-level="3.7.1" data-path="data-vizualization.html"><a href="data-vizualization.html#exercises-4"><i class="fa fa-check"></i><b>3.7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-vizualization.html"><a href="data-vizualization.html#position-adjustments"><i class="fa fa-check"></i><b>3.8</b> Position adjustments</a><ul>
<li class="chapter" data-level="3.8.1" data-path="data-vizualization.html"><a href="data-vizualization.html#exercises-5"><i class="fa fa-check"></i><b>3.8.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="data-vizualization.html"><a href="data-vizualization.html#coordinate-systems"><i class="fa fa-check"></i><b>3.9</b> Coordinate Systems</a><ul>
<li class="chapter" data-level="3.9.1" data-path="data-vizualization.html"><a href="data-vizualization.html#exercises-6"><i class="fa fa-check"></i><b>3.9.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="data-vizualization.html"><a href="data-vizualization.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>3.10</b> The layered grammar of graphics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>4</b> Workflow: basics</a></li>
<li class="chapter" data-level="5" data-path="data-transformations.html"><a href="data-transformations.html"><i class="fa fa-check"></i><b>5</b> Data transformations</a><ul>
<li class="chapter" data-level="5.1" data-path="data-transformations.html"><a href="data-transformations.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a><ul>
<li class="chapter" data-level="5.1.1" data-path="data-transformations.html"><a href="data-transformations.html#prerequisites"><i class="fa fa-check"></i><b>5.1.1</b> Prerequisites</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-transformations.html"><a href="data-transformations.html#nycflights13"><i class="fa fa-check"></i><b>5.1.2</b> nycflights13</a></li>
<li class="chapter" data-level="5.1.3" data-path="data-transformations.html"><a href="data-transformations.html#dplyr-basics"><i class="fa fa-check"></i><b>5.1.3</b> dplyr basics</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-transformations.html"><a href="data-transformations.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>5.2</b> Filter rows with <code>filter()</code></a><ul>
<li class="chapter" data-level="5.2.1" data-path="data-transformations.html"><a href="data-transformations.html#skip-section"><i class="fa fa-check"></i><b>5.2.1</b> Skip section</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-transformations.html"><a href="data-transformations.html#logical-operators"><i class="fa fa-check"></i><b>5.2.2</b> Logical operators</a></li>
<li class="chapter" data-level="5.2.3" data-path="data-transformations.html"><a href="data-transformations.html#missing-values"><i class="fa fa-check"></i><b>5.2.3</b> Missing Values</a></li>
<li class="chapter" data-level="5.2.4" data-path="data-transformations.html"><a href="data-transformations.html#exercises-7"><i class="fa fa-check"></i><b>5.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-transformations.html"><a href="data-transformations.html#arrange-rows-with-arrange"><i class="fa fa-check"></i><b>5.3</b> Arrange rows with <code>arrange()</code></a><ul>
<li class="chapter" data-level="5.3.1" data-path="data-transformations.html"><a href="data-transformations.html#exercises-8"><i class="fa fa-check"></i><b>5.3.1</b> 5.3.1 Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-transformations.html"><a href="data-transformations.html#selection-columns-with-select"><i class="fa fa-check"></i><b>5.4</b> Selection columns with <code>select()</code></a><ul>
<li class="chapter" data-level="5.4.1" data-path="data-transformations.html"><a href="data-transformations.html#exercises-9"><i class="fa fa-check"></i><b>5.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-transformations.html"><a href="data-transformations.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>5.5</b> Add new variables with <code>mutate()</code></a><ul>
<li class="chapter" data-level="5.5.1" data-path="data-transformations.html"><a href="data-transformations.html#useful-creation-functions"><i class="fa fa-check"></i><b>5.5.1</b> Useful creation functions</a></li>
<li class="chapter" data-level="5.5.2" data-path="data-transformations.html"><a href="data-transformations.html#exercises-10"><i class="fa fa-check"></i><b>5.5.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data-transformations.html"><a href="data-transformations.html#grouped-summaries-with-summarise"><i class="fa fa-check"></i><b>5.6</b> 5.6 Grouped summaries with <code>summarise()</code></a><ul>
<li class="chapter" data-level="5.6.1" data-path="data-transformations.html"><a href="data-transformations.html#combining-multiple-operations-with-the-pipe"><i class="fa fa-check"></i><b>5.6.1</b> Combining multiple operations with the pipe</a></li>
<li class="chapter" data-level="5.6.2" data-path="data-transformations.html"><a href="data-transformations.html#missing-values-1"><i class="fa fa-check"></i><b>5.6.2</b> Missing values</a></li>
<li class="chapter" data-level="5.6.3" data-path="data-transformations.html"><a href="data-transformations.html#counts"><i class="fa fa-check"></i><b>5.6.3</b> Counts</a></li>
<li class="chapter" data-level="5.6.4" data-path="data-transformations.html"><a href="data-transformations.html#useful-summary-functions"><i class="fa fa-check"></i><b>5.6.4</b> Useful summary functions</a></li>
<li class="chapter" data-level="5.6.5" data-path="data-transformations.html"><a href="data-transformations.html#grouping-by-multiple-variables"><i class="fa fa-check"></i><b>5.6.5</b> Grouping by multiple variables</a></li>
<li class="chapter" data-level="5.6.6" data-path="data-transformations.html"><a href="data-transformations.html#ungrouping"><i class="fa fa-check"></i><b>5.6.6</b> Ungrouping</a></li>
<li class="chapter" data-level="5.6.7" data-path="data-transformations.html"><a href="data-transformations.html#exercises-11"><i class="fa fa-check"></i><b>5.6.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="data-transformations.html"><a href="data-transformations.html#grouped-mutates-and-filters"><i class="fa fa-check"></i><b>5.7</b> Grouped mutates (and filters)</a><ul>
<li class="chapter" data-level="5.7.1" data-path="data-transformations.html"><a href="data-transformations.html#exercises-12"><i class="fa fa-check"></i><b>5.7.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow-scripts.html"><a href="workflow-scripts.html"><i class="fa fa-check"></i><b>6</b> Workflow Scripts</a></li>
<li class="chapter" data-level="7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>7</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#skip-section-1"><i class="fa fa-check"></i><b>7.1</b> Skip section</a></li>
<li class="chapter" data-level="7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#questions"><i class="fa fa-check"></i><b>7.2</b> Questions</a></li>
<li class="chapter" data-level="7.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#variation"><i class="fa fa-check"></i><b>7.3</b> Variation</a><ul>
<li class="chapter" data-level="7.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualising-distributions"><i class="fa fa-check"></i><b>7.3.1</b> Visualising distributions</a></li>
<li class="chapter" data-level="7.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#typical-values"><i class="fa fa-check"></i><b>7.3.2</b> Typical values</a></li>
<li class="chapter" data-level="7.3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#unusual-values"><i class="fa fa-check"></i><b>7.3.3</b> Unusual values</a></li>
<li class="chapter" data-level="7.3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#excercises"><i class="fa fa-check"></i><b>7.3.4</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#missing-values-2"><i class="fa fa-check"></i><b>7.4</b> Missing values</a><ul>
<li class="chapter" data-level="7.4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercises-13"><i class="fa fa-check"></i><b>7.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#covariation"><i class="fa fa-check"></i><b>7.5</b> Covariation</a><ul>
<li class="chapter" data-level="7.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#a-categorical-and-continuous-variable"><i class="fa fa-check"></i><b>7.5.1</b> A categorical and continuous variable</a></li>
<li class="chapter" data-level="7.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-categorical-variables"><i class="fa fa-check"></i><b>7.5.2</b> Two Categorical variables</a></li>
<li class="chapter" data-level="7.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-continuous-variables"><i class="fa fa-check"></i><b>7.5.3</b> Two continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#skip-section-2"><i class="fa fa-check"></i><b>7.6</b> Skip section</a></li>
<li class="chapter" data-level="7.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#skip-section-3"><i class="fa fa-check"></i><b>7.7</b> Skip section</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="workflow-projects.html"><a href="workflow-projects.html"><i class="fa fa-check"></i><b>8</b> Workflow Projects</a></li>
<li class="chapter" data-level="9" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>9</b> Introduction</a></li>
<li class="chapter" data-level="10" data-path="tibbles.html"><a href="tibbles.html"><i class="fa fa-check"></i><b>10</b> Tibbles</a><ul>
<li class="chapter" data-level="10.1" data-path="tibbles.html"><a href="tibbles.html#introduction-2"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="tibbles.html"><a href="tibbles.html#creating-tibbles"><i class="fa fa-check"></i><b>10.2</b> Creating tibbles</a></li>
<li class="chapter" data-level="10.3" data-path="tibbles.html"><a href="tibbles.html#tibbles-vs.-data.frame"><i class="fa fa-check"></i><b>10.3</b> Tibbles vs. data.frame</a><ul>
<li class="chapter" data-level="10.3.1" data-path="tibbles.html"><a href="tibbles.html#printing"><i class="fa fa-check"></i><b>10.3.1</b> Printing</a></li>
<li class="chapter" data-level="10.3.2" data-path="tibbles.html"><a href="tibbles.html#subsetting"><i class="fa fa-check"></i><b>10.3.2</b> Subsetting</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tibbles.html"><a href="tibbles.html#interacting-with-older-code"><i class="fa fa-check"></i><b>10.4</b> Interacting with older code</a></li>
<li class="chapter" data-level="10.5" data-path="tibbles.html"><a href="tibbles.html#exercises-17"><i class="fa fa-check"></i><b>10.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>11</b> Data Import</a><ul>
<li class="chapter" data-level="11.1" data-path="data-import.html"><a href="data-import.html#skip-section-4"><i class="fa fa-check"></i><b>11.1</b> Skip section</a></li>
<li class="chapter" data-level="11.2" data-path="data-import.html"><a href="data-import.html#getting-started"><i class="fa fa-check"></i><b>11.2</b> Getting Started</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Working Through R for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data_vizualization" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Data Visualization</h1>
<div id="skipping-this-section" class="section level2">
<h2><span class="header-section-number">3.1</span> Skipping this section</h2>
</div>
<div id="first-steps" class="section level2">
<h2><span class="header-section-number">3.2</span> First Steps</h2>
<p>Use the <code>mpg</code> data frame and visualization techniques to answer this question: Do cars with big engines use more fuel than cars with small engines?</p>
<div id="the-mpg-data-frame" class="section level3">
<h3><span class="header-section-number">3.2.1</span> The <code>mpg</code> data frame</h3>
<p>The <code>mpg</code> dataframe is included in the <code>ggplot2</code> package. It contains data on 38 car models, collected by the US Environmental Protection Agency.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-vizualization.html#cb2-1"></a>mpg</span></code></pre></div>
<pre><code>## # A tibble: 234 x 11
##    manufacturer model    displ  year   cyl trans   drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4         1.8  1999     4 auto(l~ f        18    29 p     comp~
##  2 audi         a4         1.8  1999     4 manual~ f        21    29 p     comp~
##  3 audi         a4         2    2008     4 manual~ f        20    31 p     comp~
##  4 audi         a4         2    2008     4 auto(a~ f        21    30 p     comp~
##  5 audi         a4         2.8  1999     6 auto(l~ f        16    26 p     comp~
##  6 audi         a4         2.8  1999     6 manual~ f        18    26 p     comp~
##  7 audi         a4         3.1  2008     6 auto(a~ f        18    27 p     comp~
##  8 audi         a4 quat~   1.8  1999     4 manual~ 4        18    26 p     comp~
##  9 audi         a4 quat~   1.8  1999     4 auto(l~ 4        16    25 p     comp~
## 10 audi         a4 quat~   2    2008     4 manual~ 4        20    28 p     comp~
## # ... with 224 more rows</code></pre>
<p>We can use <code>?mpg</code> to get more information on the dataframe.</p>
<p>The dataframe has 234 rows with the following 11 variables:</p>
<ol style="list-style-type: decimal">
<li>manufacturer - manufacturer name</li>
<li>model - model name</li>
<li>displ - engine displacement, in litres</li>
<li>year - year of manufacture</li>
<li>cyl - number of cylinders</li>
<li>trans - type of transmission</li>
<li>drv - the type of drive train, where f = front-wheel drive, r = rear wheel drive, 4 = 4wd</li>
<li>cty - city miles per gallon</li>
<li>hwy - highway miles per gallon</li>
<li>fl - fuel type</li>
<li>class - “type” of car</li>
</ol>
</div>
<div id="creating-a-ggplot" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Creating a ggplot</h3>
<p><a href="data-vizualization.html#top">Back to Top</a></p>
<p>Plot <code>disp</code> on the x-axis and <code>hwy</code> on the y-axis.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-vizualization.html#cb4-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb4-2"><a href="data-vizualization.html#cb4-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Notice the negative relationship between engine size (<code>displ</code>) and highway fuel efficiency (<code>hwy</code>), indicating that cars with big engines use more fuel.</p>
<p><em>Not in book:</em> Let’s try this with city mileage as well.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-vizualization.html#cb5-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb5-2"><a href="data-vizualization.html#cb5-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> cty))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Looks pretty much the same as highway mileage.</p>
</div>
<div id="notes-on-ggplot" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Notes on <code>ggplot</code></h3>
<p>The call to <code>ggplot()</code> create a coordinate system which we’ll add layers to. We connect a dataset to the plot using the <code>data</code> argument. This creates an empty plot.</p>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>Run ggplot(data = mpg). What do you see?</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-vizualization.html#cb6-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Just a blank figure.</p>
<ol start="2" style="list-style-type: decimal">
<li>How many rows are in mpg? How many columns?</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-vizualization.html#cb7-1"></a><span class="co"># rows in mpg</span></span>
<span id="cb7-2"><a href="data-vizualization.html#cb7-2"></a><span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;rows =&quot;</span>, <span class="kw">nrow</span>(mpg)))</span></code></pre></div>
<pre><code>## [1] &quot;rows = 234&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-vizualization.html#cb9-1"></a><span class="co"># columns in mpg</span></span>
<span id="cb9-2"><a href="data-vizualization.html#cb9-2"></a><span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;columns =&quot;</span>, <span class="kw">ncol</span>(mpg)))</span></code></pre></div>
<pre><code>## [1] &quot;columns = 11&quot;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>What does the drv variable describe? Read the help for ?mpg to find out.
?mpg
<code>drv</code> describes the type of drive train in the vehicle, where</li>
</ol>
<ul>
<li>f = front-wheel drive</li>
<li>r = rear-wheel drive</li>
<li>4 = 4-wheel drive</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Make a scatterplot of hwy vs cyl.</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-vizualization.html#cb11-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb11-2"><a href="data-vizualization.html#cb11-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> hwy, <span class="dt">y =</span> cyl))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<ol start="5" style="list-style-type: decimal">
<li>What happens if you make a scatterplot of class vs drv? Why is the plot not useful?</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-vizualization.html#cb12-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb12-2"><a href="data-vizualization.html#cb12-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> class, <span class="dt">y =</span> drv))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>This is not useful because both of these variables are categorical. We’re not gaining much information by displaying the data as a scatter plot.</p>
</div>
</div>
<div id="aesthetic-mappings" class="section level2">
<h2><span class="header-section-number">3.3</span> Aesthetic mappings</h2>
<p>Mapping aesthetics in your plot to variables in the data can help to illuminate interesting patterns. Let’s map the <code>class</code> cariable to a plot of <code>displ</code> and <code>hwy</code> to see how those distribute.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-vizualization.html#cb13-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb13-2"><a href="data-vizualization.html#cb13-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>We’ve mapping the colors of the points to the class variable. The <code>2seater</code> class seem to be outliers with large engines and good hwy mileage. This makes sense because these sports cars have large engines with small bodies.</p>
<p>We can also map variables to the <code>size</code> aesthetic. It’s best not to map size to a categorical variable.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-vizualization.html#cb14-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb14-2"><a href="data-vizualization.html#cb14-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">size =</span> class))</span></code></pre></div>
<pre><code>## Warning: Using size for a discrete variable is not advised.</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>We also have the <code>alpha</code> or <code>shape</code> aesthetics.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-vizualization.html#cb16-1"></a><span class="co"># Left</span></span>
<span id="cb16-2"><a href="data-vizualization.html#cb16-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span><span class="st"> </span></span>
<span id="cb16-3"><a href="data-vizualization.html#cb16-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">alpha =</span> class))</span></code></pre></div>
<pre><code>## Warning: Using alpha for a discrete variable is not advised.</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-vizualization.html#cb18-1"></a><span class="co"># Right</span></span>
<span id="cb18-2"><a href="data-vizualization.html#cb18-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span><span class="st"> </span></span>
<span id="cb18-3"><a href="data-vizualization.html#cb18-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">shape =</span> class))</span></code></pre></div>
<pre><code>## Warning: The shape palette can deal with a maximum of 6 discrete values because
## more than 6 becomes difficult to discriminate; you have 7. Consider
## specifying shapes manually if you must have them.</code></pre>
<pre><code>## Warning: Removed 62 rows containing missing values (geom_point).</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-11-2.png" width="672" /></p>
<p>The <code>shapes</code> aesthetic can only map six categories, and the rest will not be included.</p>
<p>You can also set the aesthetic properties manually. When the aesthetic is set manually (and not depending on a variable), it must be set OUTSIDE of the <code>aes</code> call.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-vizualization.html#cb21-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb21-2"><a href="data-vizualization.html#cb21-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy), <span class="dt">color =</span> <span class="st">&#39;blue&#39;</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div id="exercises-1" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What’s gone wrong with this code? Why are the points not blue?
<code>ggplot(data = mpg) +    geom_point(mapping = aes(x = displ, y = hwy, color = "blue"))</code></li>
</ol>
<p>The <code>color</code> is set manually, so it needs to be outside of the <code>aes()</code> call.</p>
<ol start="2" style="list-style-type: decimal">
<li>Which variables in mpg are categorical? Which variables are continuous? (Hint: type ?mpg to read the documentation for the dataset). How can you see this information when you run mpg?
?mpg
str(mpg)</li>
</ol>
<p>The <strong>categorical</strong> variables are:</p>
<ul>
<li>manufactuerer</li>
<li>model</li>
<li>year</li>
<li>cyl</li>
<li>trans</li>
<li>drv</li>
<li>cty</li>
<li>hwy</li>
<li>fl</li>
<li>class</li>
</ul>
<p>The <strong>continuous</strong> variables are:</p>
<ul>
<li>displ</li>
</ul>
<p>When we look at the <code>mpg</code> dataframe. We can look at the type of data that is in each column. <code>chr</code> variables are categorical. <code>num</code> variables are continuous. <code>int</code> variables aren’t technically categorical nor continuous. Treating them as categorical is actually reducing the information that we have, so we might want to consider them as ordinal.</p>
<ol start="3" style="list-style-type: decimal">
<li>Map a continuous variable to color, size, and shape. How do these aesthetics behave differently for categorical vs. continuous variables?</li>
</ol>
<p>Continuous Case:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-vizualization.html#cb22-1"></a><span class="co"># map color</span></span>
<span id="cb22-2"><a href="data-vizualization.html#cb22-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb22-3"><a href="data-vizualization.html#cb22-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> displ))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-vizualization.html#cb23-1"></a><span class="co"># map size</span></span>
<span id="cb23-2"><a href="data-vizualization.html#cb23-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb23-3"><a href="data-vizualization.html#cb23-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">size =</span> displ))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-vizualization.html#cb24-1"></a><span class="co"># map shape - doesn&#39;t work</span></span>
<span id="cb24-2"><a href="data-vizualization.html#cb24-2"></a><span class="co"># ggplot(data = mpg) +</span></span>
<span id="cb24-3"><a href="data-vizualization.html#cb24-3"></a><span class="co">#   geom_point(mapping = aes(x = displ, y = hwy, shape = displ))</span></span></code></pre></div>
<p>Categorical Case:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-vizualization.html#cb25-1"></a><span class="co"># map color</span></span>
<span id="cb25-2"><a href="data-vizualization.html#cb25-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb25-3"><a href="data-vizualization.html#cb25-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> drv))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-vizualization.html#cb26-1"></a><span class="co"># map size</span></span>
<span id="cb26-2"><a href="data-vizualization.html#cb26-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb26-3"><a href="data-vizualization.html#cb26-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">size =</span> drv))</span></code></pre></div>
<pre><code>## Warning: Using size for a discrete variable is not advised.</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-14-2.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-vizualization.html#cb28-1"></a><span class="co"># map shape</span></span>
<span id="cb28-2"><a href="data-vizualization.html#cb28-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb28-3"><a href="data-vizualization.html#cb28-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">shape =</span> drv))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-14-3.png" width="672" /></p>
<p>Shape doesn’t map with a continuous variable. Color takes on a gradient.</p>
<p>Size doesn’t work well with a categorical variable.</p>
<ol start="4" style="list-style-type: decimal">
<li>What happens if you map the same variable to multiple aesthetics?</li>
</ol>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-vizualization.html#cb29-1"></a><span class="co"># map color and size</span></span>
<span id="cb29-2"><a href="data-vizualization.html#cb29-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb29-3"><a href="data-vizualization.html#cb29-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> displ, <span class="dt">size =</span> displ))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>We get both of the aesthetics on the same plot.</p>
<ol start="5" style="list-style-type: decimal">
<li>What does the stroke aesthetic do? What shapes does it work with? (Hint: use ?geom_point)
?geom_point</li>
</ol>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-vizualization.html#cb30-1"></a><span class="co"># map color</span></span>
<span id="cb30-2"><a href="data-vizualization.html#cb30-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb30-3"><a href="data-vizualization.html#cb30-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">stroke =</span> <span class="dv">5</span>))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>The stroke aesthetic modifies the width of the border for each point.</p>
<ol start="6" style="list-style-type: decimal">
<li>What happens if you map an aesthetic to something other than a variable name, like aes(colour = displ &lt; 5)? Note, you’ll also need to specify x and y.</li>
</ol>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-vizualization.html#cb31-1"></a><span class="co"># map color</span></span>
<span id="cb31-2"><a href="data-vizualization.html#cb31-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb31-3"><a href="data-vizualization.html#cb31-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> displ <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>We can set functions to set the aesthetics according to the data.</p>
</div>
</div>
<div id="skipping-this-section-1" class="section level2">
<h2><span class="header-section-number">3.4</span> Skipping this section</h2>
</div>
<div id="facets" class="section level2">
<h2><span class="header-section-number">3.5</span> Facets</h2>
<p><strong>Facets</strong> allow us to split plots into multiple <em>subplots</em>. We can facet the plot by a single variable using <code>facet_wrap()</code>. The first argument of <code>facep_wrap()</code> is a formula which specifies the variable to so split the plot on.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-vizualization.html#cb32-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb32-2"><a href="data-vizualization.html#cb32-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb32-3"><a href="data-vizualization.html#cb32-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>class, <span class="dt">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>We can facet the plot on the combination to two variables as well, using <code>facet_grid()</code>.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-vizualization.html#cb33-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb33-2"><a href="data-vizualization.html#cb33-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb33-3"><a href="data-vizualization.html#cb33-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(drv <span class="op">~</span><span class="st"> </span>cyl)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>To avoid rows and columns, we can use <code>.</code> instead of a variable name.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-vizualization.html#cb34-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb34-2"><a href="data-vizualization.html#cb34-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, </span>
<span id="cb34-3"><a href="data-vizualization.html#cb34-3"></a>                           <span class="dt">color =</span> class)) <span class="op">+</span></span>
<span id="cb34-4"><a href="data-vizualization.html#cb34-4"></a><span class="st">  </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>class)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<div id="exercises-2" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What happens when you facet on a continuous variable?</li>
</ol>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-vizualization.html#cb35-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb35-2"><a href="data-vizualization.html#cb35-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb35-3"><a href="data-vizualization.html#cb35-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(drv <span class="op">~</span><span class="st"> </span>cty)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Creating the facet using a continuous variable splits up the graph into each of the continuous values, resulting in a terrible graph.</p>
<ol start="2" style="list-style-type: decimal">
<li>What do the empty cells in plot with <code>facet_grid(drv ~ cyl)</code> mean?</li>
</ol>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-vizualization.html#cb36-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb36-2"><a href="data-vizualization.html#cb36-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb36-3"><a href="data-vizualization.html#cb36-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(drv <span class="op">~</span><span class="st"> </span>cyl)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>The empty plots are facets that did not have any corresponding data. For instance, rear-wheel-drive did not have any cars with engine displacement (<code>displ</code>) of 4 or 5 litres.</p>
<p>How do they relate to this plot?</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-vizualization.html#cb37-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span><span class="st"> </span></span>
<span id="cb37-2"><a href="data-vizualization.html#cb37-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> drv, <span class="dt">y =</span> cyl))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>We see that we’re missing points at each of the variable combinations that aren’t present in our dataset.</p>
<ol start="3" style="list-style-type: decimal">
<li>What plots does the following code make? What does <code>.</code> do?</li>
</ol>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data-vizualization.html#cb38-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span><span class="st"> </span></span>
<span id="cb38-2"><a href="data-vizualization.html#cb38-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb38-3"><a href="data-vizualization.html#cb38-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(drv <span class="op">~</span><span class="st"> </span>.)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-vizualization.html#cb39-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span><span class="st"> </span></span>
<span id="cb39-2"><a href="data-vizualization.html#cb39-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb39-3"><a href="data-vizualization.html#cb39-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>cyl)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-24-2.png" width="672" /></p>
<p>We create facets using just one variable. The <code>.</code> retains the rows or columns so that we don’t tile in that direction.</p>
<ol start="4" style="list-style-type: decimal">
<li>Take the first faceted plot in this section:</li>
</ol>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data-vizualization.html#cb40-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span><span class="st"> </span></span>
<span id="cb40-2"><a href="data-vizualization.html#cb40-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb40-3"><a href="data-vizualization.html#cb40-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>class, <span class="dt">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>What are the advantages to using faceting instead of the color aesthetic? What are the disadvantages? How might the balance change if you had a larger dataset?</p>
<p>We can look at the color aesthetic here to compare.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-vizualization.html#cb41-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span><span class="st"> </span></span>
<span id="cb41-2"><a href="data-vizualization.html#cb41-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>One thing we can see immediately is that the overlapping points make it more difficult to look at a single group when we use the color aesthetic compared to the facet aesthetic. If we’re interested in comparing points and looking for patterns within groups, then the facet aesthetic is more usefule here.</p>
<p>A disadvantage of using facets is that we lose some ability to compare across groups. With the color aesthetic, we immediately see how groups are mixed into one another, but this is less obvious with the facets.</p>
<p>Depending on how many groups we’re comparing, each of these aesthetics will change as well. If we have too many groups, facets will quickly become overwhelming to look at. In larger datasets with fewer groups, we might prefer to separate groups using facets so that we have less density per plot.</p>
<ol start="5" style="list-style-type: decimal">
<li>Read <code>?facet_wrap</code>. What does <code>nrow</code> do? What does <code>ncol</code> do? What other options control the layout of the individual panels? Why doesn’t <code>facet_grid()</code> have <code>nrow</code> and <code>ncol</code> arguments?</li>
</ol>
<p>The <code>facet_wrap</code> function wraps a sequence of panels into a 2-dimensional figure. The <code>nrow</code> and <code>ncol</code> arguments allow you to define the number of rows and columns for the wrapped figure.</p>
<p>The <code>as.table</code> option controls the order of the panels in the output. If <code>as.table</code> is TRUE (default), then te highest values will be at the bottom-right, otherwise, the highest value is at the top-left.</p>
<p>The <code>dir</code> option specifies whether the direction should be “h” for horizontal (default) or “v” for vertical.</p>
<p><code>facet_grid()</code> does not have the <code>nrow</code> or <code>ncol</code> argumetns because we pass in the <code>rows</code> and <code>cols</code> arguments to define the groups that will create the rows and columns of the grid.</p>
<ol start="6" style="list-style-type: decimal">
<li>When using <code>facet_grid()</code> you should usually put the variable wit more unique levels in the columns. Why?</li>
</ol>
<p>This would create a landscape figure rather than a tall portait figure.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data-vizualization.html#cb42-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb42-2"><a href="data-vizualization.html#cb42-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb42-3"><a href="data-vizualization.html#cb42-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>cyl)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-vizualization.html#cb43-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb43-2"><a href="data-vizualization.html#cb43-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb43-3"><a href="data-vizualization.html#cb43-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(cyl <span class="op">~</span><span class="st"> </span>year)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>The graphs are clearer and easier to read when we put the variable with more levels into the columns.</p>
</div>
</div>
<div id="geometric-objects" class="section level2">
<h2><span class="header-section-number">3.6</span> Geometric Objects</h2>
<p>Plots can represent the same data with different visual objects. These are referred to as <strong>geoms</strong>. Take the following two graphs for example.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-vizualization.html#cb44-1"></a><span class="co"># scatter plot</span></span>
<span id="cb44-2"><a href="data-vizualization.html#cb44-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb44-3"><a href="data-vizualization.html#cb44-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-vizualization.html#cb45-1"></a><span class="co"># line plot</span></span>
<span id="cb45-2"><a href="data-vizualization.html#cb45-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg) <span class="op">+</span></span>
<span id="cb45-3"><a href="data-vizualization.html#cb45-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-29-2.png" width="672" /></p>
<p>Every geom in ggplot2 takes a <code>mapping</code> argument, however not every aesthetic can work with every geom. For instance, you can set the shape of a point, but not of a line.</p>
<p>Linetype can be set for a line.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-vizualization.html#cb47-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb47-2"><a href="data-vizualization.html#cb47-2"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">linetype =</span> drv))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p>The <code>drv</code> variable describes the car’s drivetrain, which include 4-wheel-drive, forward-wheel-drive, and rear-wheel-drive. We’ve set the aesthetic to separate the data according to drivetrain and the linetype reflects each group.</p>
<p>We can see this even more clearly by overlapping multiple geoms on one plot.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-vizualization.html#cb49-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb49-2"><a href="data-vizualization.html#cb49-2"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">linetype =</span> drv, <span class="dt">color =</span> drv)) <span class="op">+</span></span>
<span id="cb49-3"><a href="data-vizualization.html#cb49-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color =</span> drv))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>Here are some resources for the different geoms available for ggplot2:</p>
<ul>
<li><a href="https://exts.ggplot2.tidyverse.org/gallery/" class="uri">https://exts.ggplot2.tidyverse.org/gallery/</a></li>
<li><a href="http://rstudio.com/cheatsheets" class="uri">http://rstudio.com/cheatsheets</a></li>
</ul>
<p>Geoms like <code>geom_smooth()</code> use a single object to represent the data. We can set the <code>group</code> aesthetic to split the object into multiple groups. The convenient thing about the <code>group</code> feature is that a legend is not added automatically to our plot.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-vizualization.html#cb51-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb51-2"><a href="data-vizualization.html#cb51-2"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">group =</span> drv))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<p>We can also manually remove the legend from aesthetics that do generate one, such as the <code>color</code> aesthetic.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-vizualization.html#cb53-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb53-2"><a href="data-vizualization.html#cb53-2"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, </span>
<span id="cb53-3"><a href="data-vizualization.html#cb53-3"></a>                            <span class="dt">group =</span> drv, <span class="dt">color =</span> drv),</span>
<span id="cb53-4"><a href="data-vizualization.html#cb53-4"></a>                            <span class="dt">show.legend =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p>To include multiple geoms in the same plot, we just add them to the same <code>ggplot()</code> function.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-vizualization.html#cb55-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span></span>
<span id="cb55-2"><a href="data-vizualization.html#cb55-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb55-3"><a href="data-vizualization.html#cb55-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<p>By writing the code like this, we duplicate the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> axis assignments. This could make things difficult for updating these axes to different variables. Instead, we can add these assignments to the <code>ggplot()</code> function where they serve as global variables.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-vizualization.html#cb57-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb57-2"><a href="data-vizualization.html#cb57-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb57-3"><a href="data-vizualization.html#cb57-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<p>You can still extend or overwrite the global mappings by placing them directly in the geom function.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data-vizualization.html#cb59-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb59-2"><a href="data-vizualization.html#cb59-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color =</span> class)) <span class="op">+</span></span>
<span id="cb59-3"><a href="data-vizualization.html#cb59-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<p>You can use this to specify different data for the geoms as well. Here, we’ll subset the smooth line to just the subcompact cars.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data-vizualization.html#cb61-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb61-2"><a href="data-vizualization.html#cb61-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color =</span> class)) <span class="op">+</span></span>
<span id="cb61-3"><a href="data-vizualization.html#cb61-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mpg, class <span class="op">==</span><span class="st"> &#39;subcompact&#39;</span>), </span>
<span id="cb61-4"><a href="data-vizualization.html#cb61-4"></a>              <span class="dt">se =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<div id="exercises-3" class="section level3">
<h3><span class="header-section-number">3.6.1</span> Exercises</h3>
<p><a id="top"></a></p>
<ol style="list-style-type: decimal">
<li>What geom would you use to draw a</li>
</ol>
<ul>
<li>line chart? <code>geom_line()</code></li>
<li>boxplot? <code>geom_boxplot()</code></li>
<li>histogram? <code>geom_histogram()</code></li>
<li>area chart? <code>geom_area()</code></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Run this code in your head and predict what the output will look like. Then run the code in R and check your prediction.</li>
</ol>
<p><strong>Prediction:</strong> Map a scatter plot of <code>displ</code> against <code>hwy</code>, colored by <code>drv</code>. Includes smooth lines, also separated by <code>drv</code> and without standard errors.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-vizualization.html#cb63-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> drv)) <span class="op">+</span></span>
<span id="cb63-2"><a href="data-vizualization.html#cb63-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb63-3"><a href="data-vizualization.html#cb63-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>What does <code>show.legend = FALSE</code> do? What happens if you remove it? Why do you think I used it earlier in the chapter.</li>
</ol>
<p>The <code>show.legend</code> flag indicates whether a legend should be included in the plot. It was probably used earlier because the legend only pertained to one of the plots.</p>
<ol start="4" style="list-style-type: decimal">
<li>What does the <code>se</code> argument to <code>geom_smooth()</code> do?
The <code>se</code> argument indicates whether the standard error region associated with the smooth line should be displayed.</li>
</ol>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-vizualization.html#cb65-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> drv)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb65-2"><a href="data-vizualization.html#cb65-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb65-3"><a href="data-vizualization.html#cb65-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Will these two graphs look different? Why/Why not?</li>
</ol>
<p><strong>Prediction:</strong> No, because the first plot simply sets global aesthetics, while the second plot sets the same aesthetics locally.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-vizualization.html#cb67-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb67-2"><a href="data-vizualization.html#cb67-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb67-3"><a href="data-vizualization.html#cb67-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-vizualization.html#cb69-1"></a><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb69-2"><a href="data-vizualization.html#cb69-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb69-3"><a href="data-vizualization.html#cb69-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-40-2.png" width="672" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Recreate the R code necessary to generate the following graphs.</li>
</ol>
<p>Top left graph:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-vizualization.html#cb71-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb71-2"><a href="data-vizualization.html#cb71-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">4</span>) <span class="op">+</span></span>
<span id="cb71-3"><a href="data-vizualization.html#cb71-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">size=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<p>Top right plot:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-vizualization.html#cb73-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb73-2"><a href="data-vizualization.html#cb73-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">4</span>) <span class="op">+</span></span>
<span id="cb73-3"><a href="data-vizualization.html#cb73-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">size=</span><span class="dv">2</span>, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">group =</span> drv))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p>Middle left plot:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-vizualization.html#cb75-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> drv)) <span class="op">+</span></span>
<span id="cb75-2"><a href="data-vizualization.html#cb75-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">4</span>) <span class="op">+</span></span>
<span id="cb75-3"><a href="data-vizualization.html#cb75-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">size=</span><span class="dv">2</span>, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">group =</span> drv))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p>Middle right plot:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-vizualization.html#cb77-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb77-2"><a href="data-vizualization.html#cb77-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">4</span>, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color =</span> drv)) <span class="op">+</span></span>
<span id="cb77-3"><a href="data-vizualization.html#cb77-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">size=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<p>Bottom left plot:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data-vizualization.html#cb79-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb79-2"><a href="data-vizualization.html#cb79-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">4</span>, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color =</span> drv)) <span class="op">+</span></span>
<span id="cb79-3"><a href="data-vizualization.html#cb79-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">size=</span><span class="dv">2</span>, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">linetype =</span> drv))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
<p>Bottom right plot:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-vizualization.html#cb81-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></span>
<span id="cb81-2"><a href="data-vizualization.html#cb81-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">6</span>, <span class="dt">color =</span> <span class="st">&#39;gray97&#39;</span>) <span class="op">+</span></span>
<span id="cb81-3"><a href="data-vizualization.html#cb81-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color =</span> drv))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-46-1.png" width="672" /></p>
</div>
</div>
<div id="statistical-transformations" class="section level2">
<h2><span class="header-section-number">3.7</span> Statistical transformations</h2>
<p>Bar charts are a useful way to look at data. Here’s a bar chart using the <code>diamonds</code> dataset, groupbed by <code>cuts</code>. This dataset contiains information about ~54,000 diamonds, including price, carat, color, clarity and cut of each diamond. We can see from the plot that more diamonds are available with high quality cuts than with low quality cuts.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="data-vizualization.html#cb82-1"></a><span class="kw">names</span>(diamonds)</span></code></pre></div>
<pre><code>##  [1] &quot;carat&quot;   &quot;cut&quot;     &quot;color&quot;   &quot;clarity&quot; &quot;depth&quot;   &quot;table&quot;   &quot;price&quot;  
##  [8] &quot;x&quot;       &quot;y&quot;       &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="data-vizualization.html#cb84-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds) <span class="op">+</span></span>
<span id="cb84-2"><a href="data-vizualization.html#cb84-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-47-1.png" width="672" /></p>
<p>The <span class="math inline">\(y\)</span>-axis variable, <em>count</em> is not in the <code>diamonds</code> dataset. Some graphs create new values to plot.</p>
<ul>
<li>bar charts, histograms, and frequency polygons bin your data and then plot bin counts</li>
<li>smoothers fit a model to your data and then plot predictions from the model</li>
<li>boxplots compute summary statistics about the distribution and then display the formatted box</li>
</ul>
<p>The algorithm used to produce the transformation is called a <strong>stat</strong> (i.e. statistical tranformation). You can get more info about what stat a geom uses by inspecting its default <code>stat</code> argument. For examples, <code>?geom_bar</code> shows us the the <code>stat</code> is “count”, which means that it uses the <code>stat_count()</code> function.</p>
<p>You can generally use stats and geoms interchangably. This produces the same graph as before,</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-vizualization.html#cb85-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span></span>
<span id="cb85-2"><a href="data-vizualization.html#cb85-2"></a><span class="st">  </span><span class="kw">stat_count</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<p>Every geom has a default stat and every stat has a default geom.</p>
<p>There are three reason why you might want to select a stat specifically:</p>
<ol style="list-style-type: decimal">
<li>You want to override the default stat. Here we want to create a barchart where the actual data values are represented rather than counts.</li>
</ol>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-vizualization.html#cb86-1"></a>demo &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb86-2"><a href="data-vizualization.html#cb86-2"></a>  <span class="op">~</span>cut,         <span class="op">~</span>freq,</span>
<span id="cb86-3"><a href="data-vizualization.html#cb86-3"></a>  <span class="st">&quot;Fair&quot;</span>,       <span class="dv">1610</span>,</span>
<span id="cb86-4"><a href="data-vizualization.html#cb86-4"></a>  <span class="st">&quot;Good&quot;</span>,       <span class="dv">4906</span>,</span>
<span id="cb86-5"><a href="data-vizualization.html#cb86-5"></a>  <span class="st">&quot;Very Good&quot;</span>,  <span class="dv">12082</span>,</span>
<span id="cb86-6"><a href="data-vizualization.html#cb86-6"></a>  <span class="st">&quot;Premium&quot;</span>,    <span class="dv">13791</span>,</span>
<span id="cb86-7"><a href="data-vizualization.html#cb86-7"></a>  <span class="st">&quot;Ideal&quot;</span>,      <span class="dv">21551</span></span>
<span id="cb86-8"><a href="data-vizualization.html#cb86-8"></a>)</span>
<span id="cb86-9"><a href="data-vizualization.html#cb86-9"></a></span>
<span id="cb86-10"><a href="data-vizualization.html#cb86-10"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> demo) <span class="op">+</span></span>
<span id="cb86-11"><a href="data-vizualization.html#cb86-11"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> freq), <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>You might want to override the default mapping from transformed variables to aesthetics. Here we display a bar chart for proportions rather than counts.</li>
</ol>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-vizualization.html#cb87-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span></span>
<span id="cb87-2"><a href="data-vizualization.html#cb87-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">y=</span><span class="kw">stat</span>(prop), <span class="dt">group=</span><span class="dv">1</span>))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>You might want to emphasize the statistical transformation in your code. Here we use <code>stat_summary()</code> to summarize the y values for each unique x value to draw attention to the summary that we’re computing.</li>
</ol>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="data-vizualization.html#cb88-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span></span>
<span id="cb88-2"><a href="data-vizualization.html#cb88-2"></a><span class="st">  </span><span class="kw">stat_summary</span>(</span>
<span id="cb88-3"><a href="data-vizualization.html#cb88-3"></a>    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">y=</span>depth),</span>
<span id="cb88-4"><a href="data-vizualization.html#cb88-4"></a>    <span class="dt">fun.ymin =</span> min,</span>
<span id="cb88-5"><a href="data-vizualization.html#cb88-5"></a>    <span class="dt">fun.ymax =</span> max,</span>
<span id="cb88-6"><a href="data-vizualization.html#cb88-6"></a>    <span class="dt">fun.y =</span> median</span>
<span id="cb88-7"><a href="data-vizualization.html#cb88-7"></a>  )</span></code></pre></div>
<pre><code>## Warning: `fun.y` is deprecated. Use `fun` instead.</code></pre>
<pre><code>## Warning: `fun.ymin` is deprecated. Use `fun.min` instead.</code></pre>
<pre><code>## Warning: `fun.ymax` is deprecated. Use `fun.max` instead.</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-51-1.png" width="672" /></p>
<div id="exercises-4" class="section level3">
<h3><span class="header-section-number">3.7.1</span> Exercises</h3>
<p><a id="top"></a></p>
<ol style="list-style-type: decimal">
<li>What is the default geom associated with <code>stat_summary()</code>? How could you rewrite the previous plot to use that geom function instead of the stat function?</li>
</ol>
<p>?stat_summary()</p>
<p>The default geom associated with <code>stat_summary()</code> is the <code>pointrange</code> geom.</p>
<p>?geom_pointrange()</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="data-vizualization.html#cb92-1"></a><span class="co"># create a df with the values first</span></span>
<span id="cb92-2"><a href="data-vizualization.html#cb92-2"></a>diamonds_summary &lt;-<span class="st"> </span>diamonds <span class="op">%&gt;%</span></span>
<span id="cb92-3"><a href="data-vizualization.html#cb92-3"></a><span class="st">  </span><span class="kw">group_by</span>(cut) <span class="op">%&gt;%</span></span>
<span id="cb92-4"><a href="data-vizualization.html#cb92-4"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">lower =</span> <span class="kw">min</span>(depth), <span class="dt">med =</span> <span class="kw">median</span>(depth), <span class="dt">upper =</span> <span class="kw">max</span>(depth))</span>
<span id="cb92-5"><a href="data-vizualization.html#cb92-5"></a></span>
<span id="cb92-6"><a href="data-vizualization.html#cb92-6"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds_summary) <span class="op">+</span></span>
<span id="cb92-7"><a href="data-vizualization.html#cb92-7"></a><span class="st">  </span><span class="kw">geom_pointrange</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">y=</span>med, <span class="dt">ymax=</span>upper, <span class="dt">ymin=</span>lower)</span>
<span id="cb92-8"><a href="data-vizualization.html#cb92-8"></a>  ) <span class="op">+</span></span>
<span id="cb92-9"><a href="data-vizualization.html#cb92-9"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;depth&quot;</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>What does <code>geom_col()</code> do? How is it different to <code>geom_bar()</code>?</li>
</ol>
<p>?geom_col</p>
<p>Both <code>geom_col</code> and <code>geom_bar</code> are geoms to create bar charts. The bar heights using <code>geom_col</code> represents values in the data. We need to specify two variables for each of the x and y-axes. The bar heights represent the y-axis variable’s value for each of the categories on the x-axis variable.</p>
<p>The <code>geom_bar</code> represents the bar height proportional to the number of cases in each group. We only specify one variable for the x-axis, and the bar heights are computed to represent the count for each category.</p>
<p>We can look at examples of the two here.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data-vizualization.html#cb93-1"></a><span class="co"># bar height is proportional</span></span>
<span id="cb93-2"><a href="data-vizualization.html#cb93-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span></span>
<span id="cb93-3"><a href="data-vizualization.html#cb93-3"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>cut))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="data-vizualization.html#cb94-1"></a><span class="co"># bar height is proportional</span></span>
<span id="cb94-2"><a href="data-vizualization.html#cb94-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span></span>
<span id="cb94-3"><a href="data-vizualization.html#cb94-3"></a><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">y=</span>depth))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Most geoms and stats come in pairs that are almost always used in concert. Read through the documentation and make a list of all the pairs. What do they have in common?</li>
</ol>
<p>See geom cheat sheets. <a href="https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" class="uri">https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf</a></p>
<ol start="4" style="list-style-type: decimal">
<li>What variables does <code>stat_smooth()</code> compute? What parameters control its behaviour?</li>
</ol>
<p>The <code>stat_smooth()</code> function adds a smooth line to data points that allows us to view patterns in the data.</p>
<ul>
<li>The <code>method</code> argument allows us to choose how the smooth line is gererated with smoothing methods including “lm”, “glm”, “gam”, “loess”, or a function.</li>
<li>The <code>function</code> argument allos you to enter a smoothing function like “y ~ x”.</li>
<li><code>se</code> is a boolean to include standard errors or not</li>
</ul>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="data-vizualization.html#cb95-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>iris, <span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Petal.Width, <span class="dt">color=</span>Species)) <span class="op">+</span></span>
<span id="cb95-2"><a href="data-vizualization.html#cb95-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb95-3"><a href="data-vizualization.html#cb95-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
<ol start="5" style="list-style-type: decimal">
<li>In our proportion bar chart, we need to set <code>group = 1</code>. Why? In other words what is the problem with these two graphs?</li>
</ol>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="data-vizualization.html#cb97-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds) <span class="op">+</span><span class="st"> </span></span>
<span id="cb97-2"><a href="data-vizualization.html#cb97-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> ..prop..))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="data-vizualization.html#cb98-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds) <span class="op">+</span><span class="st"> </span></span>
<span id="cb98-2"><a href="data-vizualization.html#cb98-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> color, <span class="dt">y =</span> ..prop..))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-56-2.png" width="672" /></p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="data-vizualization.html#cb99-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds) <span class="op">+</span><span class="st"> </span></span>
<span id="cb99-2"><a href="data-vizualization.html#cb99-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> ..prop.., <span class="dt">group=</span><span class="dv">1</span>))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="data-vizualization.html#cb100-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds) <span class="op">+</span><span class="st"> </span></span>
<span id="cb100-2"><a href="data-vizualization.html#cb100-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> color, <span class="dt">y =</span> ..prop.., <span class="dt">group=</span><span class="dv">1</span>))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-57-2.png" width="672" /></p>
<p>Without the group argument, the geom will group the data according to the x-axis variable <code>cut</code>. Since we are interested in proportions, we need to consider al of the variables together, so we need to have them as a single group. Notice how the color argument no longer distinguished between the different cuts when we add the <code>group</code> argument.</p>
</div>
</div>
<div id="position-adjustments" class="section level2">
<h2><span class="header-section-number">3.8</span> Position adjustments</h2>
<p>We can adjust colors in bar charts using eithe the <code>color</code> or <code>fill</code> aesthetics.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="data-vizualization.html#cb101-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span><span class="st"> </span></span>
<span id="cb101-2"><a href="data-vizualization.html#cb101-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">color=</span>cut))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="data-vizualization.html#cb102-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span><span class="st"> </span></span>
<span id="cb102-2"><a href="data-vizualization.html#cb102-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">fill=</span>cut))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-58-2.png" width="672" /></p>
<p>We can even map the color to another variable. The bars will reflect the data and the colors will be stacked to represent the aesthetic variable.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data-vizualization.html#cb103-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span></span>
<span id="cb103-2"><a href="data-vizualization.html#cb103-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">fill=</span>clarity))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<p>The stacking is done automatically by the <strong>position adjustment</strong> specified by the <code>position</code> argument. If you don’t want a stacked barchart, you can use one of the three other options:</p>
<ul>
<li><code>"identity"</code></li>
<li><code>"dodge"</code></li>
<li><code>"fill"</code></li>
</ul>
<p>The <code>"identity"</code> option places each object exactly where it falls in the context of the graph. For bar charts, this simply overlaps the bars. To see the overlapping bars, we need to adjust one of the other aesthetics, like <code>alpha</code>.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="data-vizualization.html#cb104-1"></a><span class="co"># set the transparency of the fill using alpha</span></span>
<span id="cb104-2"><a href="data-vizualization.html#cb104-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">fill=</span>clarity)) <span class="op">+</span></span>
<span id="cb104-3"><a href="data-vizualization.html#cb104-3"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha=</span><span class="fl">1.5</span>, <span class="dt">position=</span><span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="data-vizualization.html#cb105-1"></a><span class="co"># remove the fill by setting fill to NA</span></span>
<span id="cb105-2"><a href="data-vizualization.html#cb105-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">color=</span>clarity)) <span class="op">+</span></span>
<span id="cb105-3"><a href="data-vizualization.html#cb105-3"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">fill=</span><span class="ot">NA</span>, <span class="dt">position=</span><span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-60-2.png" width="672" /></p>
<p>The <code>"fill"</code> option works like stacking but makes each stack of bars the same height. This makes comparing proportions easier.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="data-vizualization.html#cb106-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span></span>
<span id="cb106-2"><a href="data-vizualization.html#cb106-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">fill=</span>clarity), <span class="dt">position=</span><span class="st">&quot;fill&quot;</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<p>The <code>"dodge"</code> option places overlapping objects beside one another. This makes for easier comparisons between individual values.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="data-vizualization.html#cb107-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span></span>
<span id="cb107-2"><a href="data-vizualization.html#cb107-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">fill=</span>clarity), <span class="dt">position=</span><span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>One more option that is not useful for barcharts can be used with scatterplots. This is the <code>"jitter"</code> position which allows us to see overlapping points on a scatterplot. Notice in the following plot that we only see 126 points even though there are 234 observations.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data-vizualization.html#cb108-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg) <span class="op">+</span></span>
<span id="cb108-2"><a href="data-vizualization.html#cb108-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<p>We can avoid this with the <code>"jitter"</code> option, which adds a small amount of random noise to the points on the plot.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="data-vizualization.html#cb109-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg) <span class="op">+</span></span>
<span id="cb109-2"><a href="data-vizualization.html#cb109-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy), <span class="dt">position=</span><span class="st">&quot;jitter&quot;</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
<p>This can really help display the data on a plot. Another way to jitter points on a scatter plot is to use the <code>geom_jitter()</code> geom.</p>
<div id="exercises-5" class="section level3">
<h3><span class="header-section-number">3.8.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What is the problem with this plot? How could you improve it?</li>
</ol>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data-vizualization.html#cb110-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cty, <span class="dt">y=</span>hwy)) <span class="op">+</span></span>
<span id="cb110-2"><a href="data-vizualization.html#cb110-2"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
<p>We might want to jitter the points to view more.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="data-vizualization.html#cb111-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cty, <span class="dt">y=</span>hwy)) <span class="op">+</span></span>
<span id="cb111-2"><a href="data-vizualization.html#cb111-2"></a><span class="st">  </span><span class="kw">geom_jitter</span>()</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
<p>Now we can see much more data on the graph.</p>
<ol start="2" style="list-style-type: decimal">
<li>What parameters to <code>geom_jitter()</code> control the amount of jittering?</li>
</ol>
<p>The <code>width</code> and <code>height</code> parameters control the amount of horizontal and vertical jitter. The default values are 40%. We can try to play around with this setting.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="data-vizualization.html#cb112-1"></a><span class="co"># more horizontal jitter</span></span>
<span id="cb112-2"><a href="data-vizualization.html#cb112-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cty, <span class="dt">y=</span>hwy)) <span class="op">+</span></span>
<span id="cb112-3"><a href="data-vizualization.html#cb112-3"></a><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width=</span><span class="fl">0.7</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="data-vizualization.html#cb113-1"></a><span class="co"># more veritcal jitter</span></span>
<span id="cb113-2"><a href="data-vizualization.html#cb113-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cty, <span class="dt">y=</span>hwy)) <span class="op">+</span></span>
<span id="cb113-3"><a href="data-vizualization.html#cb113-3"></a><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">height=</span><span class="fl">0.7</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-67-2.png" width="672" /></p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data-vizualization.html#cb114-1"></a><span class="co"># less horizontal jitter</span></span>
<span id="cb114-2"><a href="data-vizualization.html#cb114-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cty, <span class="dt">y=</span>hwy)) <span class="op">+</span></span>
<span id="cb114-3"><a href="data-vizualization.html#cb114-3"></a><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width=</span><span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-67-3.png" width="672" /></p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="data-vizualization.html#cb115-1"></a><span class="co"># less vertical jitter</span></span>
<span id="cb115-2"><a href="data-vizualization.html#cb115-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cty, <span class="dt">y=</span>hwy)) <span class="op">+</span></span>
<span id="cb115-3"><a href="data-vizualization.html#cb115-3"></a><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">height=</span><span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-67-4.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Compare and contrast <code>geom_jitter()</code> with <code>geom_count()</code>.</li>
</ol>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="data-vizualization.html#cb116-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cty, <span class="dt">y=</span>hwy)) <span class="op">+</span></span>
<span id="cb116-2"><a href="data-vizualization.html#cb116-2"></a><span class="st">  </span><span class="kw">geom_jitter</span>()</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-68-1.png" width="672" /></p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="data-vizualization.html#cb117-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>cty, <span class="dt">y=</span>hwy)) <span class="op">+</span></span>
<span id="cb117-2"><a href="data-vizualization.html#cb117-2"></a><span class="st">  </span><span class="kw">geom_count</span>()</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-68-2.png" width="672" /></p>
<p>The two geoms are quite similar, with <code>geom_jitter</code> we look at the density of points to see how areas that are highly represnted and with <code>geom_count</code> we look at the size of the points instead. The benefit of <code>geom_count</code> is that the points are in their original position so we get a more accurate representation of the data, however, the true number of points is still somewhat hidden.</p>
<ol start="4" style="list-style-type: decimal">
<li>What’s the default position adjustment for <code>geom_boxplot()</code>? Create a visualization of the <code>mpg</code> dataset that demonstrates it.</li>
</ol>
<p>The default position of <code>geom_boxplot</code> is “dodge2”. We can look at the <code>class</code> variable colored by <code>drv</code> to view this.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data-vizualization.html#cb118-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg) <span class="op">+</span></span>
<span id="cb118-2"><a href="data-vizualization.html#cb118-2"></a><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>class, <span class="dt">y=</span>hwy, <span class="dt">color=</span>drv))</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<p>We can try playing around with other postions as well.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="data-vizualization.html#cb119-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg) <span class="op">+</span></span>
<span id="cb119-2"><a href="data-vizualization.html#cb119-2"></a><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>class, <span class="dt">y=</span>hwy, <span class="dt">fill=</span>drv, <span class="dt">alpha=</span><span class="fl">0.2</span>), <span class="dt">position=</span><span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
</div>
</div>
<div id="coordinate-systems" class="section level2">
<h2><span class="header-section-number">3.9</span> Coordinate Systems</h2>
<p>The default coordinate system is the Cartesian coordinate system where the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> coordinates act independently to determine the location of each point. There are other coordinate systems that we can use.</p>
<p><code>coord_flip()</code> switches the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> axes. This comes in handy for making things like horizontal box plots.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="data-vizualization.html#cb120-1"></a><span class="co"># vertical boxplots</span></span>
<span id="cb120-2"><a href="data-vizualization.html#cb120-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>class, <span class="dt">y=</span>hwy, <span class="dt">fill=</span>class)) <span class="op">+</span></span>
<span id="cb120-3"><a href="data-vizualization.html#cb120-3"></a><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="data-vizualization.html#cb121-1"></a><span class="co"># horizontal boxplots</span></span>
<span id="cb121-2"><a href="data-vizualization.html#cb121-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>class, <span class="dt">y=</span>hwy, <span class="dt">fill=</span>class)) <span class="op">+</span></span>
<span id="cb121-3"><a href="data-vizualization.html#cb121-3"></a><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb121-4"><a href="data-vizualization.html#cb121-4"></a><span class="st">  </span><span class="kw">coord_flip</span>()</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-71-2.png" width="672" /></p>
<p><code>coord_quickmap()</code> sets the aspect ratio correctly for maps. This is important for plotting spatial data.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data-vizualization.html#cb122-1"></a>map &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&quot;world&quot;</span>)</span>
<span id="cb122-2"><a href="data-vizualization.html#cb122-2"></a></span>
<span id="cb122-3"><a href="data-vizualization.html#cb122-3"></a><span class="kw">ggplot</span>(map, <span class="kw">aes</span>(long, lat, <span class="dt">group=</span>group, <span class="dt">fill=</span>region)) <span class="op">+</span></span>
<span id="cb122-4"><a href="data-vizualization.html#cb122-4"></a><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">color=</span><span class="st">&quot;black&quot;</span>, <span class="dt">show.legend=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-72-1.png" width="672" /></p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="data-vizualization.html#cb123-1"></a><span class="kw">ggplot</span>(map, <span class="kw">aes</span>(long, lat, <span class="dt">group=</span>group, <span class="dt">fill=</span>region)) <span class="op">+</span></span>
<span id="cb123-2"><a href="data-vizualization.html#cb123-2"></a><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">color=</span><span class="st">&quot;black&quot;</span>, <span class="dt">show.legend=</span><span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb123-3"><a href="data-vizualization.html#cb123-3"></a><span class="st">  </span><span class="kw">coord_quickmap</span>()</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-72-2.png" width="672" /></p>
<p><code>coord_polar()</code> uses polar coordinates. This can reveal interesting connections between a bar chart and Coxcomb chart.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="data-vizualization.html#cb124-1"></a>bar &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds) <span class="op">+</span></span>
<span id="cb124-2"><a href="data-vizualization.html#cb124-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x=</span>cut, <span class="dt">fill=</span>cut),</span>
<span id="cb124-3"><a href="data-vizualization.html#cb124-3"></a>           <span class="dt">show.legend =</span> <span class="ot">FALSE</span>,</span>
<span id="cb124-4"><a href="data-vizualization.html#cb124-4"></a>           <span class="dt">width =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb124-5"><a href="data-vizualization.html#cb124-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">aspect.ratio=</span><span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb124-6"><a href="data-vizualization.html#cb124-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="ot">NULL</span>, <span class="dt">y=</span><span class="ot">NULL</span>)</span>
<span id="cb124-7"><a href="data-vizualization.html#cb124-7"></a></span>
<span id="cb124-8"><a href="data-vizualization.html#cb124-8"></a>bar <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>()</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="data-vizualization.html#cb125-1"></a>bar <span class="op">+</span><span class="st"> </span><span class="kw">coord_polar</span>()</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-73-2.png" width="672" /></p>
<div id="exercises-6" class="section level3">
<h3><span class="header-section-number">3.9.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>Turn a stacked bar chart into a pie chard using <code>coord_polar()</code></li>
</ol>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="data-vizualization.html#cb126-1"></a><span class="co"># without polar coordinates</span></span>
<span id="cb126-2"><a href="data-vizualization.html#cb126-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">factor</span>(<span class="dv">1</span>), <span class="dt">fill=</span>cut)) <span class="op">+</span></span>
<span id="cb126-3"><a href="data-vizualization.html#cb126-3"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-74-1.png" width="672" /></p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="data-vizualization.html#cb127-1"></a><span class="co"># with polar coordinates</span></span>
<span id="cb127-2"><a href="data-vizualization.html#cb127-2"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">factor</span>(<span class="dv">1</span>), <span class="dt">fill=</span>cut)) <span class="op">+</span></span>
<span id="cb127-3"><a href="data-vizualization.html#cb127-3"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width=</span><span class="dv">1</span>)  <span class="op">+</span></span>
<span id="cb127-4"><a href="data-vizualization.html#cb127-4"></a><span class="st">  </span><span class="kw">coord_polar</span>(<span class="dt">theta=</span><span class="st">&quot;y&quot;</span>) <span class="op">+</span></span>
<span id="cb127-5"><a href="data-vizualization.html#cb127-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="ot">NULL</span>, <span class="dt">y=</span><span class="ot">NULL</span>)</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-74-2.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>What does <code>labs()</code> do? Read the documentation.</li>
</ol>
<p><code>labs()</code> allows you to add labels to your plot. You can add a title, subtitle, caption, tag, and update the x and y axes’ labels.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="data-vizualization.html#cb128-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">factor</span>(<span class="dv">1</span>), <span class="dt">fill=</span>cut)) <span class="op">+</span></span>
<span id="cb128-2"><a href="data-vizualization.html#cb128-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width=</span><span class="dv">1</span>)  <span class="op">+</span></span>
<span id="cb128-3"><a href="data-vizualization.html#cb128-3"></a><span class="st">  </span><span class="kw">coord_polar</span>(<span class="dt">theta=</span><span class="st">&quot;y&quot;</span>) <span class="op">+</span></span>
<span id="cb128-4"><a href="data-vizualization.html#cb128-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="ot">NULL</span>, <span class="dt">y=</span><span class="ot">NULL</span>,</span>
<span id="cb128-5"><a href="data-vizualization.html#cb128-5"></a>       <span class="dt">title=</span><span class="st">&quot;Proportion of Diamond Cuts&quot;</span>,</span>
<span id="cb128-6"><a href="data-vizualization.html#cb128-6"></a>       <span class="dt">subtitle=</span><span class="st">&quot;A pie chart&quot;</span>,</span>
<span id="cb128-7"><a href="data-vizualization.html#cb128-7"></a>       <span class="dt">caption=</span><span class="st">&quot;This pie chart shows us the proportion of diamonds with different cuts in the diamonds dataset. </span></span>
<span id="cb128-8"><a href="data-vizualization.html#cb128-8"></a><span class="st">       Most diamonds are cute with the Ideal cut, followed by Premium.&quot;</span>,</span>
<span id="cb128-9"><a href="data-vizualization.html#cb128-9"></a>       <span class="dt">tag=</span><span class="st">&quot;diamonds dataset&quot;</span></span>
<span id="cb128-10"><a href="data-vizualization.html#cb128-10"></a>       )</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>What’s the difference between <code>coord_quickmap()</code> and <code>coord_map()</code>?
<code>coord_map()</code> projects a portion of the earth onto a flat 2D plane and does not typically preserve straight lines. It requires a lot fo computation.</li>
</ol>
<p><code>coord_quickmap()</code> approximates the projection and does preserve straight lines. It’s better to use for smaller areas closer to the equator.</p>
<ol start="4" style="list-style-type: decimal">
<li>What does the plot below tell you about the relationship between city and highway mpg? Why is <code>coord_fixed()</code> important? What does <code>geom_abline()</code> do?</li>
</ol>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="data-vizualization.html#cb129-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>mpg, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>cty, <span class="dt">y=</span>hwy)) <span class="op">+</span></span>
<span id="cb129-2"><a href="data-vizualization.html#cb129-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb129-3"><a href="data-vizualization.html#cb129-3"></a><span class="st">  </span><span class="kw">geom_abline</span>() <span class="op">+</span></span>
<span id="cb129-4"><a href="data-vizualization.html#cb129-4"></a><span class="st">  </span><span class="kw">coord_fixed</span>()</span></code></pre></div>
<p><img src="R4DS_bookdown_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
<p>This plot tells us that there is positive relationship between city miles and highway miles that a car can drive per gallon of gas. Since the points are all above the line, we see that a car always gets more highway miles than city miles.</p>
<p>The <code>abline</code> plots the diagonal line. We’re looking at the line where city miles is equal to highway miles.</p>
</div>
</div>
<div id="the-layered-grammar-of-graphics" class="section level2">
<h2><span class="header-section-number">3.10</span> The layered grammar of graphics</h2>
<p>Now we can develop a code template that uses all of the techniques we’ve learned to generat a plot with <code>ggplot</code>.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="data-vizualization.html#cb130-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="op">&lt;</span>DATA<span class="op">&gt;</span>) <span class="op">+</span></span>
<span id="cb130-2"><a href="data-vizualization.html#cb130-2"></a><span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(</span>
<span id="cb130-3"><a href="data-vizualization.html#cb130-3"></a>    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>),</span>
<span id="cb130-4"><a href="data-vizualization.html#cb130-4"></a>    <span class="dt">stat =</span> <span class="op">&lt;</span>STAT<span class="op">&gt;</span>,</span>
<span id="cb130-5"><a href="data-vizualization.html#cb130-5"></a>    <span class="dt">position =</span> <span class="op">&lt;</span>POSITION<span class="op">&gt;</span></span>
<span id="cb130-6"><a href="data-vizualization.html#cb130-6"></a><span class="st">  </span>) <span class="op">+</span></span>
<span id="cb130-7"><a href="data-vizualization.html#cb130-7"></a><span class="st">  </span><span class="er">&lt;</span>COORDINATE_FUNCTION<span class="op">&gt;</span><span class="st"> </span><span class="op">+</span></span>
<span id="cb130-8"><a href="data-vizualization.html#cb130-8"></a><span class="st">  </span><span class="er">&lt;</span>FACET_FUNCTION<span class="op">&gt;</span></span>
<span id="cb130-9"><a href="data-vizualization.html#cb130-9"></a><span class="st">  </span><span class="er">)</span></span></code></pre></div>
<p>The seven parameters for this template compose the grammar of graphics, a formal system for building plots. This grammar is based on the insight that you can uniquely describe any plot as a combination of a dataset, a geom, a set of mappings, a stat, a position adjustment, a coordinat system, and a faceting scheme.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ch-1-and-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="workflow.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R4DS_bookdown.pdf", "R4DS_bookdown.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
